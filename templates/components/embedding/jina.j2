{% block jina %}
{% if embedding.deployment == "cloud" %}
        # Cloud variant using Jina Cloud API
        headers = {
            "Authorization": f"Bearer {os.getenv('JINA_API_KEY')}",
            "Content-Type": "application/json"
        }
        try:
            response = requests.post(
                "https://api.jina.ai/v1/embeddings",
                json=data,
                headers=headers
            )
            response.raise_for_status()
            result = response.json()
        except Exception as e:
            print(f"Error generating embedding for query: {e}")
            result = None
{% else %}
        # Local variant using Jina local server
        headers = {"Content-Type": "application/json"}
        try:
            response = requests.post(
                "{{ jina_local_url }}",
                json=data,
                headers=headers
            )
            response.raise_for_status()
            result = response.json()
        except Exception as e:
            print(f"Error generating embedding for query: {e}")
            result = None
{% endif %} 
{% endblock %}